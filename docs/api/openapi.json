{
  "openapi": "3.0.3",
  "info": {
    "title": "Discord ROAS Bot API",
    "version": "2.1.0",
    "description": "Discord ROAS Bot API æ–‡æ¡£ - æˆå°±ç³»çµ±æ ¸å¿ƒ API\n\n## æ¶æ§‹èªªæ˜\n\n### Currency System (å…§éƒ¨æœå‹™)\nè²¨å¹£ç³»çµ±æ¡ç”¨å…§éƒ¨æœå‹™æ¶æ§‹ï¼Œä¸å°å¤–æš´éœ² REST APIï¼Œåƒ…é€é Discord æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤æä¾›æœå‹™ï¼š\n- **æœå‹™å±¤**: CurrencyService è² è²¬æ¥­å‹™é‚è¼¯å’Œäº‹ä»¶ç™¼å¸ƒ\n- **è³‡æ–™å±¤**: CurrencyRepository è™•ç† PostgreSQL è³‡æ–™å­˜å–\n- **æŒ‡ä»¤å±¤**: Currency Cog æä¾› Discord slash commands\n- **äº‹ä»¶é©…å‹•**: é€é InternalEventBus ç™¼å¸ƒäº¤æ˜“å’Œé¤˜é¡è®Šæ›´äº‹ä»¶\n\n### æ”¯æ´çš„è²¨å¹£åŠŸèƒ½\n- ä½¿ç”¨è€…é¤˜é¡æŸ¥è©¢ (`/currency balance`)\n- ç”¨æˆ¶é–“è½‰å¸³ (`/currency transfer`)\n- ä¼ºæœå™¨æ’è¡Œæ¦œ (`/currency top`)\n- å€‹äººæ’åæŸ¥è©¢ (`/currency rank`)\n- ç®¡ç†å“¡è²¨å¹£æ“ä½œ (`/admin-currency add/remove/stats`)\n\næ‰€æœ‰æ“ä½œå‡æ”¯æ´åŸå­æ€§äº¤æ˜“ã€ä½µç™¼æ§åˆ¶å’Œé˜²é‡æ”¾æ”»æ“Šæ©Ÿåˆ¶ã€‚",
    "contact": {
      "name": "æ„›ç´æµ·æ°‘ä¸»å…±å’Œåœ‹ç§‘æŠ€éƒ¨",
      "email": "laitszkin1206@gmail.com",
      "url": "https://github.com/Yamiyorunoshura/Discord-ROAS-Bot"
    },
    "license": {
      "name": "MIT",
      "url": "https://github.com/Yamiyorunoshura/Discord-ROAS-Bot/blob/main/LICENSE"
    },
    "x-generated-at": "2025-08-01T23:51:05.239133"
  },
  "servers": [
    {
      "url": "http://localhost:8080/api/v1",
      "description": "é–‹ç™¼ç’°å¢ƒ"
    },
    {
      "url": "https://api.adrbot.dev/v1",
      "description": "ç”Ÿç”¢ç’°å¢ƒ"
    }
  ],
  "paths": {
    "/categories": {
      "get": {
        "tags": [
          "categories"
        ],
        "summary": "å–å¾—æˆå°±åˆ†é¡åˆ—è¡¨",
        "description": "å–å¾—æ‰€æœ‰æˆå°±åˆ†é¡ï¼Œæ”¯æ´ç¯©é¸å’Œæ’åº",
        "parameters": [
          {
            "name": "active_only",
            "in": "query",
            "description": "æ˜¯å¦åªå–å¾—å•Ÿç”¨çš„åˆ†é¡",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸå–å¾—åˆ†é¡åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AchievementCategory"
                  }
                }
              }
            }
          },
          "500": {
            "description": "ä¼ºæœå™¨å…§éƒ¨éŒ¯èª¤",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "categories"
        ],
        "summary": "å»ºç«‹æ–°çš„æˆå°±åˆ†é¡",
        "description": "å»ºç«‹ä¸€å€‹æ–°çš„æˆå°±åˆ†é¡",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AchievementCategory"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "æˆåŠŸå»ºç«‹åˆ†é¡",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AchievementCategory"
                }
              }
            }
          },
          "400": {
            "description": "è«‹æ±‚è³‡æ–™ç„¡æ•ˆ",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/categories/{category_id}": {
      "get": {
        "tags": [
          "categories"
        ],
        "summary": "å–å¾—ç‰¹å®šæˆå°±åˆ†é¡",
        "description": "æ ¹æ“š ID å–å¾—ç‰¹å®šæˆå°±åˆ†é¡çš„è©³ç´°è³‡è¨Š",
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "description": "åˆ†é¡ ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸå–å¾—åˆ†é¡",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AchievementCategory"
                }
              }
            }
          },
          "404": {
            "description": "åˆ†é¡ä¸å­˜åœ¨",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "categories"
        ],
        "summary": "æ›´æ–°æˆå°±åˆ†é¡",
        "description": "æ›´æ–°ç‰¹å®šæˆå°±åˆ†é¡çš„è³‡è¨Š",
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "description": "åˆ†é¡ ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AchievementCategory"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æˆåŠŸæ›´æ–°åˆ†é¡",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AchievementCategory"
                }
              }
            }
          },
          "404": {
            "description": "åˆ†é¡ä¸å­˜åœ¨"
          }
        }
      },
      "delete": {
        "tags": [
          "categories"
        ],
        "summary": "åˆªé™¤æˆå°±åˆ†é¡",
        "description": "åˆªé™¤ç‰¹å®šçš„æˆå°±åˆ†é¡ï¼ˆéœ€è¦ç¢ºä¿åˆ†é¡ä¸‹æ²’æœ‰æˆå°±ï¼‰",
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "description": "åˆ†é¡ ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "æˆåŠŸåˆªé™¤åˆ†é¡"
          },
          "400": {
            "description": "åˆ†é¡ä¸‹é‚„æœ‰æˆå°±ï¼Œç„¡æ³•åˆªé™¤"
          },
          "404": {
            "description": "åˆ†é¡ä¸å­˜åœ¨"
          }
        }
      }
    },
    "/achievements": {
      "get": {
        "tags": [
          "achievements"
        ],
        "summary": "å–å¾—æˆå°±åˆ—è¡¨",
        "description": "å–å¾—æˆå°±åˆ—è¡¨ï¼Œæ”¯æ´å¤šç¨®ç¯©é¸å’Œåˆ†é ",
        "parameters": [
          {
            "name": "category_id",
            "in": "query",
            "description": "ç¯©é¸ç‰¹å®šåˆ†é¡",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "ç¯©é¸ç‰¹å®šé¡å‹",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/AchievementType"
            }
          },
          {
            "name": "active_only",
            "in": "query",
            "description": "æ˜¯å¦åªå–å¾—å•Ÿç”¨çš„æˆå°±",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "æœ€å¤§è¿”å›æ•¸é‡",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "è·³éçš„è¨˜éŒ„æ•¸",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸå–å¾—æˆå°±åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Achievement"
                      }
                    },
                    "meta": {
                      "$ref": "#/components/schemas/PaginationMeta"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "achievements"
        ],
        "summary": "å»ºç«‹æ–°æˆå°±",
        "description": "å»ºç«‹ä¸€å€‹æ–°çš„æˆå°±",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Achievement"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "æˆåŠŸå»ºç«‹æˆå°±",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Achievement"
                }
              }
            }
          },
          "400": {
            "description": "è«‹æ±‚è³‡æ–™ç„¡æ•ˆ"
          }
        }
      }
    },
    "/users/{user_id}/achievements": {
      "get": {
        "tags": [
          "user-achievements"
        ],
        "summary": "å–å¾—ç”¨æˆ¶æˆå°±åˆ—è¡¨",
        "description": "å–å¾—ç‰¹å®šç”¨æˆ¶çš„æ‰€æœ‰æˆå°±",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "ç”¨æˆ¶ Discord ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "ç¯©é¸ç‰¹å®šåˆ†é¡",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸå–å¾—ç”¨æˆ¶æˆå°±åˆ—è¡¨",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "user_achievement": {
                        "$ref": "#/components/schemas/UserAchievement"
                      },
                      "achievement": {
                        "$ref": "#/components/schemas/Achievement"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "user-achievements"
        ],
        "summary": "é ’ç™¼æˆå°±çµ¦ç”¨æˆ¶",
        "description": "ç‚ºç‰¹å®šç”¨æˆ¶é ’ç™¼æˆå°±",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "ç”¨æˆ¶ Discord ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "achievement_id"
                ],
                "properties": {
                  "achievement_id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "æˆå°± ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "æˆåŠŸé ’ç™¼æˆå°±",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserAchievement"
                }
              }
            }
          },
          "400": {
            "description": "ç”¨æˆ¶å·²ç²å¾—æ­¤æˆå°±æˆ–æˆå°±ä¸å­˜åœ¨"
          }
        }
      }
    },
    "/users/{user_id}/progress": {
      "get": {
        "tags": [
          "progress"
        ],
        "summary": "å–å¾—ç”¨æˆ¶æˆå°±é€²åº¦",
        "description": "å–å¾—ç‰¹å®šç”¨æˆ¶çš„æ‰€æœ‰æˆå°±é€²åº¦",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "ç”¨æˆ¶ Discord ID",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸå–å¾—ç”¨æˆ¶é€²åº¦",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AchievementProgress"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/statistics/global": {
      "get": {
        "tags": [
          "statistics"
        ],
        "summary": "å–å¾—å…¨åŸŸçµ±è¨ˆè³‡æ–™",
        "description": "å–å¾—æˆå°±ç³»çµ±çš„å…¨åŸŸçµ±è¨ˆè³‡æ–™",
        "responses": {
          "200": {
            "description": "æˆåŠŸå–å¾—çµ±è¨ˆè³‡æ–™",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "total_achievements": {
                      "type": "integer",
                      "description": "ç¸½æˆå°±æ•¸é‡"
                    },
                    "active_achievements": {
                      "type": "integer",
                      "description": "å•Ÿç”¨çš„æˆå°±æ•¸é‡"
                    },
                    "total_user_achievements": {
                      "type": "integer",
                      "description": "ç”¨æˆ¶ç²å¾—çš„ç¸½æˆå°±æ•¸"
                    },
                    "unique_users": {
                      "type": "integer",
                      "description": "æœ‰æˆå°±çš„ç¨ç‰¹ç”¨æˆ¶æ•¸"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AchievementType": {
        "type": "string",
        "enum": [
          "COUNT",
          "THRESHOLD",
          "ACCUMULATION",
          "STREAK",
          "TIME_BASED"
        ],
        "description": "æˆå°±é¡å‹",
        "example": "COUNT"
      },
      "AchievementCategory": {
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "åˆ†é¡ ID",
            "example": 1
          },
          "name": {
            "type": "string",
            "maxLength": 100,
            "description": "åˆ†é¡åç¨±",
            "example": "æ´»èºåº¦æˆå°±"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "åˆ†é¡æè¿°",
            "example": "èˆ‡ç”¨æˆ¶æ´»èºåº¦ç›¸é—œçš„æˆå°±"
          },
          "display_order": {
            "type": "integer",
            "description": "é¡¯ç¤ºé †åº",
            "default": 0,
            "example": 1
          },
          "icon_emoji": {
            "type": "string",
            "maxLength": 50,
            "description": "åˆ†é¡åœ–ç¤ºè¡¨æƒ…ç¬¦è™Ÿ",
            "example": "ğŸ†"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "å‰µå»ºæ™‚é–“",
            "readOnly": true
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "æ›´æ–°æ™‚é–“",
            "readOnly": true
          }
        },
        "example": {
          "id": 1,
          "name": "æ´»èºåº¦æˆå°±",
          "description": "èˆ‡ç”¨æˆ¶æ´»èºåº¦ç›¸é—œçš„æˆå°±",
          "display_order": 1,
          "icon_emoji": "ğŸ†",
          "created_at": "2024-01-01T00:00:00Z",
          "updated_at": "2024-01-01T00:00:00Z"
        }
      },
      "Achievement": {
        "type": "object",
        "required": [
          "name",
          "description",
          "category_id",
          "type",
          "criteria",
          "points"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "æˆå°± ID",
            "readOnly": true,
            "example": 1
          },
          "name": {
            "type": "string",
            "maxLength": 100,
            "description": "æˆå°±åç¨±",
            "example": "æ´»èºæœƒå“¡"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "æˆå°±æè¿°",
            "example": "é€£çºŒ30å¤©åœ¨ä¼ºæœå™¨ä¸­ç™¼è¨€"
          },
          "category_id": {
            "type": "integer",
            "format": "int64",
            "description": "æ‰€å±¬åˆ†é¡ ID",
            "example": 1
          },
          "type": {
            "$ref": "#/components/schemas/AchievementType"
          },
          "criteria": {
            "type": "object",
            "description": "æˆå°±é”æˆæ¢ä»¶",
            "properties": {
              "target_value": {
                "type": "number",
                "description": "ç›®æ¨™æ•¸å€¼",
                "example": 30
              }
            },
            "example": {
              "target_value": 30,
              "event_type": "message_sent",
              "consecutive_days": true
            }
          },
          "points": {
            "type": "integer",
            "minimum": 0,
            "description": "æˆå°±é»æ•¸",
            "example": 100
          },
          "badge_url": {
            "type": "string",
            "format": "uri",
            "description": "æˆå°±å¾½ç« åœ–ç‰‡ URL",
            "example": "https://example.com/badge.png"
          },
          "is_active": {
            "type": "boolean",
            "description": "æ˜¯å¦å•Ÿç”¨",
            "default": true,
            "example": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "å‰µå»ºæ™‚é–“",
            "readOnly": true
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "æ›´æ–°æ™‚é–“",
            "readOnly": true
          }
        }
      },
      "UserAchievement": {
        "type": "object",
        "required": [
          "user_id",
          "achievement_id"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "è¨˜éŒ„ ID",
            "readOnly": true,
            "example": 1
          },
          "user_id": {
            "type": "integer",
            "format": "int64",
            "description": "ç”¨æˆ¶ Discord ID",
            "example": 123456789012345678
          },
          "achievement_id": {
            "type": "integer",
            "format": "int64",
            "description": "æˆå°± ID",
            "example": 1
          },
          "earned_at": {
            "type": "string",
            "format": "date-time",
            "description": "ç²å¾—æ™‚é–“",
            "example": "2024-01-01T00:00:00Z"
          },
          "notified": {
            "type": "boolean",
            "description": "æ˜¯å¦å·²é€šçŸ¥",
            "default": false,
            "example": true
          }
        }
      },
      "AchievementProgress": {
        "type": "object",
        "required": [
          "user_id",
          "achievement_id",
          "current_value",
          "target_value"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "é€²åº¦ ID",
            "readOnly": true,
            "example": 1
          },
          "user_id": {
            "type": "integer",
            "format": "int64",
            "description": "ç”¨æˆ¶ Discord ID",
            "example": 123456789012345678
          },
          "achievement_id": {
            "type": "integer",
            "format": "int64",
            "description": "æˆå°± ID",
            "example": 1
          },
          "current_value": {
            "type": "number",
            "description": "ç•¶å‰é€²åº¦å€¼",
            "minimum": 0,
            "example": 15.5
          },
          "target_value": {
            "type": "number",
            "description": "ç›®æ¨™å€¼",
            "minimum": 0,
            "example": 30
          },
          "progress_data": {
            "type": "object",
            "description": "é¡å¤–é€²åº¦è³‡æ–™",
            "example": {
              "daily_counts": [
                1,
                2,
                1,
                3,
                0,
                2,
                1
              ],
              "streak_count": 5
            }
          },
          "last_updated": {
            "type": "string",
            "format": "date-time",
            "description": "æœ€å¾Œæ›´æ–°æ™‚é–“",
            "example": "2024-01-01T12:00:00Z"
          }
        }
      },
      "Error": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "code": {
            "type": "integer",
            "description": "éŒ¯èª¤ä»£ç¢¼",
            "example": 400
          },
          "message": {
            "type": "string",
            "description": "éŒ¯èª¤è¨Šæ¯",
            "example": "è«‹æ±‚åƒæ•¸ç„¡æ•ˆ"
          },
          "details": {
            "type": "object",
            "description": "è©³ç´°éŒ¯èª¤è³‡è¨Š",
            "example": {
              "field": "name",
              "issue": "ä¸èƒ½ç‚ºç©º"
            }
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "ç¸½è¨˜éŒ„æ•¸",
            "example": 100
          },
          "page": {
            "type": "integer",
            "description": "ç•¶å‰é ç¢¼",
            "example": 1
          },
          "per_page": {
            "type": "integer",
            "description": "æ¯é è¨˜éŒ„æ•¸",
            "example": 20
          },
          "pages": {
            "type": "integer",
            "description": "ç¸½é æ•¸",
            "example": 5
          }
        }
      }
    },
    "responses": {},
    "parameters": {},
    "examples": {},
    "requestBodies": {},
    "headers": {},
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      },
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "security": [
    {
      "ApiKeyAuth": []
    },
    {
      "BearerAuth": []
    }
  ],
  "tags": [
    {
      "name": "achievements",
      "description": "æˆå°±ç®¡ç†ç›¸é—œæ“ä½œ"
    },
    {
      "name": "categories",
      "description": "æˆå°±åˆ†é¡ç®¡ç†"
    },
    {
      "name": "user-achievements",
      "description": "ç”¨æˆ¶æˆå°±æ“ä½œ"
    },
    {
      "name": "progress",
      "description": "æˆå°±é€²åº¦è¿½è¹¤"
    },
    {
      "name": "statistics",
      "description": "çµ±è¨ˆå’Œå ±è¡¨"
    },
    {
      "name": "leaderboard",
      "description": "æ’è¡Œæ¦œåŠŸèƒ½"
    }
  ]
}