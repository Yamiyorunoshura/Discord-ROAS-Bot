# 測試策略

## 測試金字塔

```plaintext
              E2E Tests
             /        \
        Integration Tests
           /            \
      Unit Tests    Component Tests
```

## 測試組織

### 單元測試

```plaintext
tests/unit/
├── currency/               # 貨幣模組測試
│   ├── test_service.py     # 服務層測試
│   ├── test_repository.py  # 資料存取測試
│   └── test_commands.py    # 指令測試
├── achievement/            # 成就模組測試
│   ├── test_criteria.py    # 條件邏輯測試
│   ├── test_rewards.py     # 獎勵系統測試
│   └── test_events.py      # 事件處理測試
└── core/                   # 核心系統測試
    ├── test_bot.py         # Bot 核心測試
    └── test_database.py    # 資料庫層測試
```

### 整合測試

```plaintext
tests/integration/
├── test_currency_flow.py   # 貨幣系統完整流程
├── test_achievement_unlock.py # 成就解鎖流程
└── test_database_migration.py # 資料庫遷移測試
```

### E2E 測試

```plaintext
tests/e2e/
├── test_user_journey.py    # 完整使用者體驗測試
└── test_admin_workflow.py  # 管理員工作流程測試
```

## 測試範例

### 單元測試範例

```python