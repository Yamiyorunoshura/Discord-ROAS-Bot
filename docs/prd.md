# Discord ROAS Bot v2.2 產品需求文件 (PRD)

## 專案目標

Discord ROAS Bot v2.2 旨在引入貨幣系統和政府功能模組，優化核心功能，提升社群互動性和管理效率。透過移除效能監控面板，精簡系統，提供更高效的社群管理工具。

## 背景

現有 Discord 社群管理工具缺乏整合貨幣激勵和政府治理功能，導致用戶參與度低、管理複雜。本版本基於 v2.1 成就系統，新增貨幣與政府模組，解決這些痛點，提升整體體驗。

## 需求

### 功能性需求

1. **貨幣系統**
   - 管理員自訂貨幣名稱、圖標。
   - 管理成員貨幣：查看、增減、設置。
   - 嵌入式訊息面板操作。
   - 成員查看餘額、轉賬。
   - 自動排行榜公告。
   - 下拉式選單即時排行榜。
   - 政府部門專用賬戶。

2. **政府功能**
   - 自訂政府面板名稱、使用權限。
   - 部門及官級管理：新增/刪除部門、設置負責人、綁定/自動創建身分組、自動創建貨幣賬戶。
   - 自動更新 departments.json。
   - 權限管理和身分組排序。

3. **核心功能優化**
   - 修復成就面板分類問題。
   - 為完善所有模塊的單元測試。
   - 活躍度系統：個人進度條、數據統計、全域設定、計算規則。
   - 安全防護：自動過濾垃圾訊息、執行檔、惡意連結，自訂規則、違規處理。
   - 歡迎系統：自訂訊息、圖片、頻道、格式。
   - 訊息日誌：格式設定、開關、日誌頻道、授權查看歷史和截圖。

4. **移除效能監控面板**
   - 刪除所有相關面板，提升系統效率。

### 非功能性需求

- **效能**：支援高併發，響應時間 < 2 秒。
- **安全性**：符合 Discord API 規範，防範漏洞。
- **可用性**：直觀介面，易於管理員操作。
- **可擴展性**：模組化設計，便於未來擴充。

## UI 設計目標

- 嵌入式面板和下拉選單，提供直觀操作。
- 一致的視覺風格，支援自訂圖標和名稱。
- 簡潔介面，避免過載資訊。

## 技術假設

- 使用 Python 和 Discord.py。
- 資料庫：PostgreSQL 或 MongoDB。
- 部署：Docker 和 Kubernetes。
- 符合 Discord API 限制。

## 史詩 (Epics)

### Epic 1: 貨幣系統實作

- **Story 1.1**: 管理員自訂貨幣設定。
  - 驗收標準：成功儲存並應用自訂名稱和圖標。

- **Story 1.2**: 成員貨幣管理。
  - 驗收標準：正確增減餘額，轉賬功能正常。

- **Story 1.3**: 排行榜功能。
  - 驗收標準：自動公告和即時查看正常運作。

- **Story 1.4**: 部門賬戶管理。
  - 驗收標準：部門負責人可查看和管理部門賬戶餘額及交易記錄。

### Epic 2: 政府功能模組

- **Story 2.1**: 部門管理。
  - 驗收標準：新增/刪除部門，自動創建身分組和賬戶。

- **Story 2.2**: 權限和排序管理。
  - 驗收標準：身分組正確綁定和排序。

- **Story 2.3**: 官級管理。
  - 驗收標準：新增/刪除官級，自動調整身分組位置。

- **Story 2.4**: 部門資料儲存。
  - 驗收標準：資料正確更新至 departments.json 檔案。

### Epic 3: 核心模組優化

- **Story 3.1**: 活躍度系統增強。
  - 驗收標準：進度條和統計功能正確。

- **Story 3.2**: 安全和歡迎系統優化。
  - 驗收標準：過濾規則和自訂訊息正常。

- **Story 3.3**: 訊息日誌改進。
  - 驗收標準：查看歷史和截圖授權有效。

- **Story 3.4**: 完善所有模塊的單元測試。
  - 驗收標準：所有模塊單元測試覆蓋率達 80% 以上，測試通過無錯誤。

- **Story 3.5**: 修復成就面板分類問題。
  - 驗收標準：成就分類功能正常運作。

### Epic 4: 移除效能面板

- **Story 4.1**: 刪除相關代碼和介面。
  - 驗收標準：系統無效能監控功能，運行更高效。

*此文件為 Discord ROAS Bot v2.2 的完整產品需求文件，涵蓋從需求到實作的所有關鍵面向。*