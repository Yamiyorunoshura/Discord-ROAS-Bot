# ROAS Bot 功能規劃 v2.2

## 版本修復和改進
- 修復成就管理面板分類功能無法使用的問題
- 為完善所有模塊的單元測試

## 核心功能模組

### 基礎管理面板

#### 活躍度系統

- 使用者功能
  - 個人進度條自訂
    - 渲染圖案設定
    - 樣式修改
    - 即時預覽效果
- 管理員功能
  - 數據統計與分析
  - 全域設定管理
  - 計算規則配置

#### 安全防護系統

- 自動內容過濾
  - 垃圾訊息偵測
  - 執行檔阻擋
  - 惡意連結防護
- 自訂過濾規則配置
- 違規處理機制設定

#### 歡迎系統

- 訊息內容自訂
- 歡迎圖片配置
- 發送頻道管理
- 格式樣式設定

#### 訊息日誌系統

- 訊息格式設定

### 訊息日誌面板

- 管理員功能:
  - 開啟/關閉日誌功能
  - 設定可存取身分組
  - 日誌頻道設定
- 授權身分組功能:
  - 查看訊息歷史記錄
  - 訊息截圖查看 (Discord 風格UI)
    - 根據訊息長度自動調整每張截圖顯示訊息數
    - 保持一致的格式與排版

## 注意事項

- 所有管理面板需要管理員權限
- 活躍度面板一般用戶僅能修改個人設定
- 訊息日誌權限由管理員分配
- 截圖功能需確保格式正確

# 貨幣功能

## 功能特點

- 允許管理員自定義貨幣名稱和圖標
- 管理員可以管理成員貨幣數量
- 使用嵌入式訊息面板進行操作
- 成員可查看個人餘額及使用轉賬功能
- 管理員擁有完整管理權限
- 支援自動排行榜公告功能
- 成員可透過下拉式選單查看即時排行榜
- 支援政府部門專用賬戶系統

## 指令設置

### 管理員指令

- `/貨幣面板` - 開啟貨幣系統管理面板
  - 貨幣設置功能:
    - 設置貨幣名稱
    - 設置貨幣圖標
  - 成員管理功能:
    - 查看所有成員貨幣餘額
    - 增加成員貨幣
    - 減少成員貨幣
    - 設置成員餘額
  - 排行榜設置功能:
    - 設置排行榜公告頻道
    - 設置排行榜更新時間
  - 政府賬戶管理:
    - 查看所有部門賬戶餘額
    - 管理部門賬戶餘額

### 成員指令

- `/貨幣面板` - 開啟個人貨幣面板
  - 查看個人貨幣餘額
  - 轉賬給其他成員
  - 查看即時排行榜
    - 使用下拉式選單切換排行榜頁面

### 部門負責人指令

- `/部門賬戶` - 開啟部門賬戶管理面板
  - 查看部門賬戶餘額
  - 使用部門賬戶進行轉賬
  - 查看部門賬戶交易記錄

# 政府功能

## 功能特點

- 允許管理員自定義政府面板名稱
- 管理員可設置政府面板使用權限
- 使用嵌入式訊息面板進行操作
- 支援部門及官級管理功能
- 自動創建和管理身分組階級
- 智能排序身分組權限等級
- 支援綁定現有身分組功能
- 自動為新建部門創建專用貨幣賬戶
- 自動更新部門資料至 departments.json 檔案

## 指令設置

### 管理員指令

- `/政府面板` - 開啟政府系統管理面板
  - 基礎設置功能:
    - 設置面板名稱
    - 設置使用權限身分組
  - 部門管理功能:
    - 新增/刪除政府部門
      - 自動更新至 departments.json
      - 記錄部門基本資訊
      - 儲存部門權限設定
      - 保存相關身分組ID
    - 設置部門負責人職稱
    - 綁定現有負責人身分組
    - 自動創建所需身分組
    - 自動創建部門貨幣賬戶
  - 官級管理功能:
    - 新增/刪除官級等級
    - 設置官級在身分組列表中的位置
    - 綁定現有身分組至指定官級
    - 自動將新建身分組放置於對應官級之下的位置

      ```mermaid
      graph TD
        A[身分組權限層級示意圖上方為最高]
        B[官級 1]
        E[部門A - 官級1身分組]
        F[部門B - 官級1身分組]（后創建）
        C[官級 2]
        G[部門A - 官級2身分組]
        H[部門B - 官級2身分組]
        D[官級 3]
        I[部門A - 官級3身分組]
        J[部門B - 官級3身分組]
      ```

### 權限管理

- 初始僅限管理員使用
- 可自定義開放權限範圍
- 支援多層級權限管理
- 自動維護身分組等級關係

## 部門資料儲存

- departments.json 檔案結構

  ```json
  {
    "departments": [
      {
        "id": "部門唯一ID",
        "name": "部門名稱",
        "description": "部門描述",
        "roles": {
          "level1": "身分組ID",
          "level2": "身分組ID",
          "level3": "身分組ID"
        },
        "account": "部門貨幣賬戶ID",
        "permissions": ["允許的操作權限列表"]
      }
    ]
  }
  ```
# 其他需求

- 移除機器人中所有與效能監控相關的面板