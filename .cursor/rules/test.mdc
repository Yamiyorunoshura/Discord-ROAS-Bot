---
description: æ¸¬è©¦æ ¸å¿ƒéœ€æ±‚æ˜¯å¦å®Œæˆï¼›æ¸¬è©¦PRDæ˜¯å¦å®Œæˆ - è‡ªå‹•èª¿ç”¨å ´æ™¯ï¼šPRDéœ€æ±‚æ¸¬è©¦ã€æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦ã€PRDåŠŸèƒ½é©—æ”¶æ¸¬è©¦ã€PRDæ€§èƒ½åŸºæº–æ¸¬è©¦ã€PRDç”¨æˆ¶é«”é©—æ¸¬è©¦ã€PRDæ¬Šé™å®‰å…¨æ¸¬è©¦ã€PRDå°æ¯”æ¸¬è©¦å ±å‘Šã€PRDæ¸¬è©¦çµæœéŒ„å…¥ã€PRDå¯¦ç¾é€²åº¦è¨˜éŒ„ã€PRDéœ€æ±‚è§£æã€PRDæ¸¬è©¦æ¡ˆä¾‹ç”Ÿæˆã€PRDåŠŸèƒ½æ¸¬è©¦åŸ·è¡Œã€PRDæ€§èƒ½æ¸¬è©¦åŸ·è¡Œã€PRDç”¨æˆ¶é«”é©—æ¸¬è©¦åŸ·è¡Œã€PRDæ¬Šé™æ¸¬è©¦åŸ·è¡Œã€PRDæ•´åˆæ¸¬è©¦ã€PRDæ¸¬è©¦åˆ†é¡ã€PRDæ¸¬è©¦æ¨™æº–ã€PRDæ¸¬è©¦è©•ä¼°ã€PRDæ¸¬è©¦è¦†è“‹ç‡ã€PRDæ¸¬è©¦é€šéç‡ã€PRDæ¸¬è©¦è³ªé‡è©•åˆ†ã€PRDæ¸¬è©¦çµæœéŒ„å…¥æ©Ÿåˆ¶ã€PRDæ¸¬è©¦çµæœéŒ„å…¥è¦ç¯„ã€PRDæ¸¬è©¦çµæœéŒ„å…¥æµç¨‹ã€result.mdæ–‡ä»¶éŒ„å…¥ã€PRDæ¸¬è©¦é€²åº¦è¿½è¹¤ã€PRDæ¸¬è©¦æ›´æ–°æ­·å²ã€PRDæ¸¬è©¦åŸ·è¡Œæ‘˜è¦ã€PRDè©³ç´°æ¸¬è©¦çµæœã€PRDéœ€æ±‚é©—è­‰ç‹€æ…‹ã€PRDæ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°ã€PRDæ¸¬è©¦é€²åº¦è¿½è¹¤ã€PRDæ¸¬è©¦æ›´æ–°æ­·å²ã€PRDè‡ªå‹•åŒ–æ¸¬è©¦è§¸ç™¼ã€PRDæ¸¬è©¦è®Šæ›´ç›£æ§ã€PRDæ¸¬è©¦è®Šæ›´æª¢æ¸¬ã€PRDæ–‡ä»¶è®Šæ›´ç›£æ§ã€PRDå®šæœŸæ¸¬è©¦å®‰æ’ã€PRDæ¸¬è©¦é…ç½®ã€PRDæ¸¬è©¦é©—æ”¶æ¨™æº–ã€PRDåŠŸèƒ½é©—æ”¶ã€PRDæ€§èƒ½é©—æ”¶ã€PRDç”¨æˆ¶é«”é©—é©—æ”¶ã€PRDå®‰å…¨é©—æ”¶ã€PRDè¦†è“‹ç‡é©—æ”¶ã€PRDé©…å‹•åŸå‰‡ã€PRDéœ€æ±‚å°æ¯”ã€PRDå¯¦ç¾é©—è­‰ã€PRDé€²åº¦è¿½è¹¤ã€PRDæ¸¬è©¦è³ªé‡æ¨™æº–ã€PRDæ¸¬è©¦æº–ç¢ºæ€§ã€PRDæ¸¬è©¦å®Œæ•´æ€§ã€PRDæ¸¬è©¦å¯é æ€§ã€PRDæ¸¬è©¦åŠæ™‚æ€§ã€PRDæŒçºŒç›£æ§ã€PRDå®šæœŸè©•ä¼°ã€PRDå‹•æ…‹èª¿æ•´ã€PRDåé¥‹å¾ªç’°ã€PRDæ¸¬è©¦æ”¹é€²æ©Ÿåˆ¶ã€PRDæ¸¬è©¦åŸ·è¡Œå™¨ã€PRDæ¸¬è©¦ç›£æ§å™¨ã€PRDæ¸¬è©¦è§¸ç™¼å™¨ã€PRDæ¸¬è©¦è©•ä¼°å™¨ã€PRDæ¸¬è©¦è¨˜éŒ„å™¨ã€PRDæ¸¬è©¦åˆ†æå™¨ã€PRDæ¸¬è©¦å ±å‘Šç”Ÿæˆå™¨ã€PRDæ¸¬è©¦çµæœåˆ†æã€PRDæ¸¬è©¦å•é¡Œè¨ºæ–·ã€PRDæ¸¬è©¦æ”¹é€²å»ºè­°ã€PRDæ¸¬è©¦å¯¦æ–½è¨ˆåŠƒã€PRDæ¸¬è©¦é¢¨éšªè©•ä¼°ã€PRDæ¸¬è©¦æˆåŠŸæŒ‡æ¨™ã€PRDæ¸¬è©¦è³ªé‡æª¢æŸ¥ã€PRDæ¸¬è©¦å®Œæ•´æ€§è©•ä¼°ã€PRDæ¸¬è©¦å¯é æ€§åˆ†æã€PRDæ¸¬è©¦æº–ç¢ºæ€§é©—è­‰ã€PRDæ¸¬è©¦ä¸€è‡´æ€§æª¢æŸ¥ã€PRDæ¸¬è©¦é‡è¤‡æ€§åˆ†æã€PRDæ¸¬è©¦æ•ˆç‡è©•ä¼°ã€PRDæ¸¬è©¦æ•ˆæœåˆ†æã€PRDæ¸¬è©¦åƒ¹å€¼è©•ä¼°ã€PRDæ¸¬è©¦æˆæœ¬åˆ†æã€PRDæ¸¬è©¦æ”¶ç›Šè©•ä¼°ã€PRDæ¸¬è©¦ROIåˆ†æã€PRDæ¸¬è©¦æŠ•è³‡å›å ±è©•ä¼°ã€PRDæ¸¬è©¦æ•ˆç›Šåˆ†æã€PRDæ¸¬è©¦å½±éŸ¿è©•ä¼°ã€PRDæ¸¬è©¦çµæœè§£é‡‹ã€PRDæ¸¬è©¦æ•¸æ“šå¯è¦–åŒ–ã€PRDæ¸¬è©¦è¶¨å‹¢åˆ†æã€PRDæ¸¬è©¦æ¨¡å¼è­˜åˆ¥ã€PRDæ¸¬è©¦ç•°å¸¸æª¢æ¸¬ã€PRDæ¸¬è©¦ç•°å¸¸è™•ç†ã€PRDæ¸¬è©¦ç•°å¸¸é é˜²ã€PRDæ¸¬è©¦ç•°å¸¸ç›£æ§ã€PRDæ¸¬è©¦ç•°å¸¸å ±å‘Šã€PRDæ¸¬è©¦ç•°å¸¸è¿½è¹¤ã€PRDæ¸¬è©¦ç•°å¸¸è§£æ±ºã€PRDæ¸¬è©¦ç•°å¸¸å„ªåŒ–ã€PRDæ¸¬è©¦ç•°å¸¸æ”¹é€²ã€PRDæ¸¬è©¦ç•°å¸¸ç®¡ç†ã€PRDæ¸¬è©¦ç•°å¸¸æ§åˆ¶ã€PRDæ¸¬è©¦ç•°å¸¸é˜²ç¯„ã€PRDæ¸¬è©¦ç•°å¸¸é è­¦ã€PRDæ¸¬è©¦ç•°å¸¸éŸ¿æ‡‰ã€PRDæ¸¬è©¦ç•°å¸¸æ¢å¾©ã€PRDæ¸¬è©¦ç•°å¸¸ä¿®å¾©ã€PRDæ¸¬è©¦ç•°å¸¸å‡ç´šã€PRDæ¸¬è©¦ç•°å¸¸é™ç´šã€PRDæ¸¬è©¦ç•°å¸¸åˆ‡æ›ã€PRDæ¸¬è©¦ç•°å¸¸éš”é›¢ã€PRDæ¸¬è©¦ç•°å¸¸ä¸¦è¡Œã€PRDæ¸¬è©¦ç•°å¸¸ä¸²è¡Œã€PRDæ¸¬è©¦ç•°å¸¸ç•°æ­¥ã€PRDæ¸¬è©¦ç•°å¸¸åŒæ­¥ã€PRDæ¸¬è©¦ç•°å¸¸ä¸¦ç™¼ã€PRDæ¸¬è©¦ç•°å¸¸åˆ†ä½ˆã€PRDæ¸¬è©¦ç•°å¸¸é›†ä¸­ã€PRDæ¸¬è©¦ç•°å¸¸åˆ†æ•£ã€PRDæ¸¬è©¦ç•°å¸¸èšåˆã€PRDæ¸¬è©¦ç•°å¸¸åˆ†è§£ã€PRDæ¸¬è©¦ç•°å¸¸çµ„åˆã€PRDæ¸¬è©¦ç•°å¸¸æ‹†åˆ†ã€PRDæ¸¬è©¦ç•°å¸¸åˆä½µã€PRDæ¸¬è©¦ç•°å¸¸åˆ†é›¢ã€PRDæ¸¬è©¦ç•°å¸¸é€£æ¥ã€PRDæ¸¬è©¦ç•°å¸¸æ–·é–‹ã€PRDæ¸¬è©¦ç•°å¸¸å•Ÿå‹•ã€PRDæ¸¬è©¦ç•°å¸¸åœæ­¢ã€PRDæ¸¬è©¦ç•°å¸¸æš«åœã€PRDæ¸¬è©¦ç•°å¸¸æ¢å¾©ã€PRDæ¸¬è©¦ç•°å¸¸é‡å•Ÿã€PRDæ¸¬è©¦ç•°å¸¸é‡ç½®ã€PRDæ¸¬è©¦ç•°å¸¸æ¸…é™¤ã€PRDæ¸¬è©¦ç•°å¸¸æ¸…ç†ã€PRDæ¸¬è©¦ç•°å¸¸æ•´ç†ã€PRDæ¸¬è©¦ç•°å¸¸æ­¸æª”
globs: 
alwaysApply: false
---
globs: 
alwaysApply: false
---
## ğŸ“‹ æ¨™æº–åŒ–æ¸¬è©¦æµç¨‹ - result.md è¦†è“‹æ›´æ–°

### 1.1 PRD é©…å‹•æ¸¬è©¦æµç¨‹ - é‡é»ï¼šresult.md è¦†è“‹
```python
# PRD é©…å‹•æ¸¬è©¦æµç¨‹å®šç¾© - å°ˆæ³¨æ–¼ result.md è¦†è“‹æ›´æ–°
PRD_DRIVEN_TEST_WORKFLOW = {
    "step_1": "è®€å–ç¾æœ‰çš„ result.md æ–‡ä»¶",
    "step_2": "è§£æPRDéœ€æ±‚æ–‡æª”ï¼Œæå–åŠŸèƒ½è¦æ ¼", 
    "step_3": "åŸºæ–¼PRDç”Ÿæˆå°æ‡‰æ¸¬è©¦æ¡ˆä¾‹",
    "step_4": "åŸ·è¡ŒPRDåŠŸèƒ½é©—æ”¶æ¸¬è©¦",
    "step_5": "åŸ·è¡ŒPRDæ€§èƒ½åŸºæº–æ¸¬è©¦", 
    "step_6": "åŸ·è¡ŒPRDç”¨æˆ¶é«”é©—æ¸¬è©¦",
    "step_7": "åŸ·è¡ŒPRDæ¬Šé™å®‰å…¨æ¸¬è©¦",
    "step_8": "æ›´æ–° result.md æ–‡ä»¶å…§å®¹ï¼ˆè¦†è“‹æ›´æ–°ï¼‰",
    "step_9": "ä¿å­˜æ›´æ–°å¾Œçš„ result.md"
}
```

### 1.2 result.md è¦†è“‹æ›´æ–°æ©Ÿåˆ¶
```python
# utils/result_md_updater.py
class ResultMdUpdater:
    """result.md è¦†è“‹æ›´æ–°å™¨ - å°ˆæ³¨æ–¼æ›´æ–°ç¾æœ‰æ–‡ä»¶"""
    
    def __init__(self, memory_bank_path: str = "memory_bank"):
        self.memory_bank_path = memory_bank_path
        self.result_file_path = f"{memory_bank_path}/result.md"
    
    def update_result_md_with_test_results(self, test_report: PRDTestReport) -> bool:
        """æ›´æ–° result.md æ–‡ä»¶å…§å®¹ï¼ˆè¦†è“‹æ›´æ–°ï¼‰"""
        try:
            # è®€å–ç¾æœ‰çš„result.mdæ–‡æª”
            existing_content = self._read_existing_result_md()
            
            # è§£æç¾æœ‰result.mdçµæ§‹
            parsed_sections = self._parse_existing_result_sections(existing_content)
            
            # æ›´æ–°result.mdå…§å®¹ï¼ˆè¦†è“‹æ›´æ–°ï¼‰
            updated_content = self._update_result_md_content(parsed_sections, test_report)
            
            # ä¿å­˜æ›´æ–°å¾Œçš„result.mdæ–‡æª”
            self._save_updated_result_md(updated_content)
            
            print(f"âœ… result.md å·²æ›´æ–°: {self.result_file_path}")
            return True
        except Exception as e:
            print(f"âŒ result.md æ›´æ–°å¤±æ•—: {e}")
            return False
    
    def _read_existing_result_md(self) -> str:
        """è®€å–ç¾æœ‰çš„result.mdæ–‡æª”"""
        if os.path.exists(self.result_file_path):
            with open(self.result_file_path, "r", encoding="utf-8") as f:
                return f.read()
        else:
            return self._create_default_result_template()
    
    def _create_default_result_template(self) -> str:
        """å‰µå»ºé»˜èªresult.mdæ¨¡æ¿"""
        return """# ğŸ“Š æ¸¬è©¦çµæœè¨˜éŒ„

## ğŸ¯ é …ç›®æ¦‚è¿°
- **é …ç›®åç¨±**: Discord ADR Bot
- **ç‰ˆæœ¬**: 1.0.0
- **æœ€å¾Œæ›´æ–°**: {timestamp}

## ğŸ§ª PRD æ¸¬è©¦çµæœè¨˜éŒ„

### æ¸¬è©¦åŸ·è¡Œæ‘˜è¦
| æ¸¬è©¦é¡å‹ | åŸ·è¡Œæ™‚é–“ | æ¸¬è©¦ç‹€æ…‹ | è¦†è“‹ç‡ | é€šéç‡ |
|----------|----------|----------|--------|--------|

### è©³ç´°æ¸¬è©¦çµæœ
{detailed_test_results}

### PRD éœ€æ±‚é©—è­‰ç‹€æ…‹
{prd_verification_status}

### æ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°
{test_findings_and_recommendations}

## ğŸ“ˆ æ¸¬è©¦é€²åº¦è¿½è¹¤
### å·²å®Œæˆæ¸¬è©¦
{completed_tests}

### é€²è¡Œä¸­æ¸¬è©¦
{in_progress_tests}

### å¾…åŸ·è¡Œæ¸¬è©¦
{pending_tests}

## ğŸ”„ æ›´æ–°æ­·å²
{update_history}
"""
    
    def _parse_result_sections(self, result_content: str) -> dict:
        """è§£æresult.mdæ–‡æª”çš„å„å€‹ç« ç¯€"""
        sections = {
            "overview": "",
            "test_summary": "",
            "detailed_results": "",
            "prd_verification": "",
            "findings": "",
            "progress_tracking": "",
            "update_history": ""
        }
        
        # å¯¦ç¾result.mdç« ç¯€è§£æé‚è¼¯
        lines = result_content.split('\n')
        current_section = None
        
        for line in lines:
            if line.startswith('## ğŸ¯ é …ç›®æ¦‚è¿°'):
                current_section = 'overview'
            elif line.startswith('## ğŸ§ª PRD æ¸¬è©¦çµæœè¨˜éŒ„'):
                current_section = 'test_results'
            elif line.startswith('### æ¸¬è©¦åŸ·è¡Œæ‘˜è¦'):
                current_section = 'test_summary'
            elif line.startswith('### è©³ç´°æ¸¬è©¦çµæœ'):
                current_section = 'detailed_results'
            elif line.startswith('### PRD éœ€æ±‚é©—è­‰ç‹€æ…‹'):
                current_section = 'prd_verification'
            elif line.startswith('### æ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°'):
                current_section = 'findings'
            elif line.startswith('## ğŸ“ˆ æ¸¬è©¦é€²åº¦è¿½è¹¤'):
                current_section = 'progress_tracking'
            elif line.startswith('## ğŸ”„ æ›´æ–°æ­·å²'):
                current_section = 'update_history'
            else:
                if current_section:
                    if current_section == 'overview':
                        sections['overview'] += line + '\n'
                    elif current_section == 'test_summary':
                        sections['test_summary'] += line + '\n'
                    elif current_section == 'detailed_results':
                        sections['detailed_results'] += line + '\n'
                    elif current_section == 'prd_verification':
                        sections['prd_verification'] += line + '\n'
                    elif current_section == 'findings':
                        sections['findings'] += line + '\n'
                    elif current_section == 'progress_tracking':
                        sections['progress_tracking'] += line + '\n'
                    elif current_section == 'update_history':
                        sections['update_history'] += line + '\n'
        
        return sections
    
    def _add_prd_test_results(self, result_sections: dict, test_report: PRDTestReport) -> str:
        """æ·»åŠ PRDæ¸¬è©¦çµæœåˆ°result.md"""
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        
        # ç”Ÿæˆæ¸¬è©¦åŸ·è¡Œæ‘˜è¦
        test_summary = self._generate_test_summary_table(test_report)
        
        # ç”Ÿæˆè©³ç´°æ¸¬è©¦çµæœ
        detailed_results = self._generate_detailed_test_results(test_report)
        
        # ç”ŸæˆPRDéœ€æ±‚é©—è­‰ç‹€æ…‹
        prd_verification = self._generate_prd_verification_status(test_report)
        
        # ç”Ÿæˆæ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°
        findings = self._generate_test_findings_and_recommendations(test_report)
        
        # ç”Ÿæˆæ¸¬è©¦é€²åº¦è¿½è¹¤
        progress_tracking = self._generate_test_progress_tracking(test_report)
        
        # ç”Ÿæˆæ›´æ–°æ­·å²
        update_history = self._generate_test_update_history(test_report)
        
        # ç”Ÿæˆæ›´æ–°å¾Œçš„result.mdå…§å®¹
        updated_content = f"""# ğŸ“Š æ¸¬è©¦çµæœè¨˜éŒ„

## ğŸ¯ é …ç›®æ¦‚è¿°
- **é …ç›®åç¨±**: Discord ADR Bot
- **ç‰ˆæœ¬**: 1.0.0
- **æœ€å¾Œæ›´æ–°**: {timestamp}

## ğŸ§ª PRD æ¸¬è©¦çµæœè¨˜éŒ„

### æ¸¬è©¦åŸ·è¡Œæ‘˜è¦
{test_summary}

### è©³ç´°æ¸¬è©¦çµæœ
{detailed_results}

### PRD éœ€æ±‚é©—è­‰ç‹€æ…‹
{prd_verification}

### æ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°
{findings}

## ğŸ“ˆ æ¸¬è©¦é€²åº¦è¿½è¹¤
{progress_tracking}

## ğŸ”„ æ›´æ–°æ­·å²
{update_history}
"""
        
        return updated_content
    
    def _generate_test_summary_table(self, test_report: PRDTestReport) -> str:
        """ç”Ÿæˆæ¸¬è©¦åŸ·è¡Œæ‘˜è¦è¡¨æ ¼"""
        table_content = """| æ¸¬è©¦é¡å‹ | åŸ·è¡Œæ™‚é–“ | æ¸¬è©¦ç‹€æ…‹ | è¦†è“‹ç‡ | é€šéç‡ |
|----------|----------|----------|--------|--------|"""
        
        for test_type, result in test_report.summary.items():
            if test_type in ['functional', 'performance', 'ux', 'permission']:
                status_emoji = "âœ…" if result['status'] == 'passed' else "âŒ" if result['status'] == 'failed' else "ğŸŸ¡"
                table_content += f"\n| {test_type.title()} | {test_report.generated_at.strftime('%Y-%m-%d %H:%M:%S')} | {status_emoji} | {result.get('coverage', 0):.1f}% | {result.get('pass_rate', 0):.1f}% |"
        
        return table_content
    
    def _generate_detailed_test_results(self, test_report: PRDTestReport) -> str:
        """ç”Ÿæˆè©³ç´°æ¸¬è©¦çµæœ"""
        results = []
        
        for category, results_data in test_report.detailed_results.items():
            results.append(f"#### {category}")
            for test_name, test_result in results_data.items():
                status_emoji = "âœ…" if test_result['status'] == 'passed' else "âŒ"
                results.append(f"- {status_emoji} {test_name}: {test_result['message']}")
            results.append("")
        
        return "\n".join(results)
    
    def _generate_prd_verification_status(self, test_report: PRDTestReport) -> str:
        """ç”ŸæˆPRDéœ€æ±‚é©—è­‰ç‹€æ…‹"""
        verification_status = []
        
        for req_id, result in test_report.all_requirements.items():
            status_emoji = "âœ…" if result['status'] == 'passed' else "âŒ" if result['status'] == 'failed' else "ğŸŸ¡"
            verification_status.append(f"- {status_emoji} **{req_id}**: {result['description']} - {result['status']}")
        
        return "\n".join(verification_status) if verification_status else "- æš«ç„¡PRDéœ€æ±‚é©—è­‰è¨˜éŒ„"
    
    def _generate_test_findings_and_recommendations(self, test_report: PRDTestReport) -> str:
        """ç”Ÿæˆæ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°"""
        findings = []
        
        # åˆ†ææ¸¬è©¦çµæœä¸¦ç”Ÿæˆç™¼ç¾
        if test_report.summary.get('overall_status') == 'needs_improvement':
            findings.append("- ğŸ” **ç™¼ç¾**: æ•´é«”æ¸¬è©¦é€šéç‡è¼ƒä½ï¼Œéœ€è¦æ”¹é€²")
            findings.append("- ğŸ’¡ **å»ºè­°**: å„ªå…ˆä¿®å¾©å¤±æ•—çš„æ¸¬è©¦æ¡ˆä¾‹")
        
        if test_report.summary.get('coverage_percentage', 0) < 80:
            findings.append("- ğŸ” **ç™¼ç¾**: æ¸¬è©¦è¦†è“‹ç‡ä¸è¶³")
            findings.append("- ğŸ’¡ **å»ºè­°**: å¢åŠ æ¸¬è©¦æ¡ˆä¾‹ä»¥æé«˜è¦†è“‹ç‡")
        
        # æ·»åŠ å…·é«”çš„æ¸¬è©¦ç™¼ç¾
        for category, results in test_report.detailed_results.items():
            failed_tests = [name for name, result in results.items() if result['status'] == 'failed']
            if failed_tests:
                findings.append(f"- ğŸ” **{category}ç™¼ç¾**: {len(failed_tests)}å€‹æ¸¬è©¦å¤±æ•—")
                findings.append(f"- ğŸ’¡ **å»ºè­°**: ä¿®å¾© {', '.join(failed_tests[:3])} ç­‰é—œéµæ¸¬è©¦")
        
        return "\n".join(findings) if findings else "- æš«ç„¡ç‰¹æ®Šç™¼ç¾"
    
    def _generate_test_progress_tracking(self, test_report: PRDTestReport) -> str:
        """ç”Ÿæˆæ¸¬è©¦é€²åº¦è¿½è¹¤"""
        completed = []
        in_progress = []
        pending = []
        
        for req_id, result in test_report.all_requirements.items():
            if result['status'] == 'completed':
                completed.append(f"- {req_id}: {result['description']}")
            elif result['status'] == 'in_progress':
                in_progress.append(f"- {req_id}: {result['description']}")
            else:
                pending.append(f"- {req_id}: {result['description']}")
        
        content = "### å·²å®Œæˆæ¸¬è©¦\n"
        content += "\n".join(completed) if completed else "- æš«ç„¡å·²å®Œæˆæ¸¬è©¦\n"
        
        content += "\n### é€²è¡Œä¸­æ¸¬è©¦\n"
        content += "\n".join(in_progress) if in_progress else "- æš«ç„¡é€²è¡Œä¸­æ¸¬è©¦\n"
        
        content += "\n### å¾…åŸ·è¡Œæ¸¬è©¦\n"
        content += "\n".join(pending) if pending else "- æš«ç„¡å¾…åŸ·è¡Œæ¸¬è©¦\n"
        
        return content
    
    def _generate_test_update_history(self, test_report: PRDTestReport) -> str:
        """ç”Ÿæˆæ¸¬è©¦æ›´æ–°æ­·å²"""
        timestamp = test_report.generated_at.strftime("%Y-%m-%d %H:%M:%S")
        
        return f"""### {timestamp}
- åŸ·è¡ŒPRDé©…å‹•æ¸¬è©¦
- æ¸¬è©¦è¦†è“‹ç‡: {test_report.summary.get('coverage_percentage', 0):.1f}%
- æ¸¬è©¦é€šéç‡: {test_report.summary.get('pass_rate', 0):.1f}%
- æ•´é«”ç‹€æ…‹: {test_report.summary.get('overall_status', 'unknown')}

"""
    
    def _save_updated_result_md(self, updated_content: str):
        """ä¿å­˜æ›´æ–°å¾Œçš„result.mdæ–‡æª”"""
        os.makedirs(self.memory_bank_path, exist_ok=True)
        with open(self.result_file_path, "w", encoding="utf-8") as f:
            f.write(updated_content)
```

### 1.3 result.md è¦†è“‹æ›´æ–°è¦ç¯„
```python
# result.md è¦†è“‹æ›´æ–°è¦ç¯„
RESULT_MD_UPDATE_SPECIFICATION = {
    "target_file": "result.md",                   # ç›®æ¨™æ–‡ä»¶
    "file_path": "memory_bank/result.md",        # æ–‡ä»¶è·¯å¾‘
    "update_strategy": "overwrite_update",        # è¦†è“‹æ›´æ–°ç­–ç•¥
    "preserve_structure": True,                   # ä¿æŒæ–‡æª”çµæ§‹
    "update_test_summary": True,                  # æ›´æ–°æ¸¬è©¦æ‘˜è¦
    "update_verification_status": True,           # æ›´æ–°é©—è­‰ç‹€æ…‹
    "update_progress_tracking": True,             # æ›´æ–°é€²åº¦è¿½è¹¤
    "append_update_history": True                 # è¿½åŠ æ›´æ–°æ­·å²
}

# result.md è¦†è“‹æ›´æ–°æµç¨‹
RESULT_MD_UPDATE_PROCESS = {
    "step_1": "è®€å–ç¾æœ‰çš„ result.md æ–‡ä»¶",
    "step_2": "è§£æç¾æœ‰result.mdæ–‡æª”çµæ§‹",
    "step_3": "åŸ·è¡Œæ¸¬è©¦ä¸¦æ”¶é›†çµæœ",
    "step_4": "æ›´æ–°PRDéœ€æ±‚é©—è­‰ç‹€æ…‹",
    "step_5": "æ›´æ–°æ¸¬è©¦çµæœæ‘˜è¦",
    "step_6": "æ›´æ–°æ¸¬è©¦é€²åº¦è¿½è¹¤",
    "step_7": "è¿½åŠ æ›´æ–°æ­·å²è¨˜éŒ„",
    "step_8": "ä¿å­˜æ›´æ–°å¾Œçš„ result.md"
}
```

---

## ğŸ¤– AI result.md æ›´æ–°åŸ·è¡Œå™¨

### 2.1 result.md è¦†è“‹æ›´æ–°åŸ·è¡Œå™¨
```python
# utils/ai_result_md_updater.py
class AIResultMdUpdater:
    """AI result.md è¦†è“‹æ›´æ–°åŸ·è¡Œå™¨"""
    
    def __init__(self, prd_file_path: str = "memory_bank/prd.md"):
        self.prd_file_path = prd_file_path
        self.test_results = {}
        self.result_updater = ResultMdUpdater()
    
    def update_result_md_with_prd_tests(self) -> bool:
        """åŸ·è¡ŒPRDæ¸¬è©¦ä¸¦æ›´æ–° result.md"""
        print("ğŸ§ª é–‹å§‹åŸ·è¡Œ PRD æ¸¬è©¦ä¸¦æ›´æ–° result.md...")
        
        # 1. è®€å–ç¾æœ‰ result.md
        existing_result_content = self._read_existing_result_md()
        
        # 2. PRD éœ€æ±‚è§£æ
        prd_requirements = self._parse_prd_requirements()
        
        # 3. åŸºæ–¼PRDç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹
        prd_test_cases = self._generate_prd_test_cases(prd_requirements)
        
        # 4. åŸ·è¡Œå„ç¨®PRDæ¸¬è©¦
        prd_functional_results = self._run_prd_functional_tests(prd_test_cases)
        prd_performance_results = self._run_prd_performance_tests(prd_test_cases)
        prd_ux_results = self._run_prd_user_experience_tests(prd_test_cases)
        prd_permission_results = self._run_prd_permission_tests(prd_test_cases)
        
        # 5. ç”ŸæˆPRDæ¸¬è©¦å ±å‘Š
        prd_test_report = PRDTestReport(
            prd_requirements=prd_requirements,
            prd_test_cases=prd_test_cases,
            prd_functional_results=prd_functional_results,
            prd_performance_results=prd_performance_results,
            prd_ux_results=prd_ux_results,
            prd_permission_results=prd_permission_results
        )
        
        # 6. æ›´æ–° result.md æ–‡ä»¶
        success = self.result_updater.update_result_md_with_test_results(prd_test_report)
        
        if success:
            print("âœ… result.md æ›´æ–°æˆåŠŸ")
        else:
            print("âŒ result.md æ›´æ–°å¤±æ•—")
        
        return success
    
    def _read_existing_result_md(self) -> str:
        """è®€å–ç¾æœ‰çš„result.mdæ–‡ä»¶"""
        result_file_path = "memory_bank/result.md"
        if os.path.exists(result_file_path):
            with open(result_file_path, "r", encoding="utf-8") as f:
                return f.read()
        return ""
    
    def _parse_prd_requirements(self) -> List[PRDRequirement]:
        """è§£æPRDéœ€æ±‚"""
        print("ğŸ“‹ è§£æPRDéœ€æ±‚æ–‡æª”...")
        # å¯¦ç¾PRDè§£æé‚è¼¯
        return []
    
    def _generate_prd_test_cases(self, prd_requirements: List[PRDRequirement]) -> List[PRDTestCase]:
        """åŸºæ–¼PRDç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹"""
        print("ğŸ“‹ åŸºæ–¼PRDç”Ÿæˆæ¸¬è©¦æ¡ˆä¾‹...")
        # å¯¦ç¾PRDæ¸¬è©¦æ¡ˆä¾‹ç”Ÿæˆé‚è¼¯
        return []
    
    def _run_prd_functional_tests(self, prd_test_cases: List[PRDTestCase]) -> Dict[str, PRDTestResult]:
        """åŸ·è¡ŒPRDåŠŸèƒ½æ¸¬è©¦"""
        print("ğŸ”§ åŸ·è¡ŒPRDåŠŸèƒ½æ¸¬è©¦...")
        results = {}
        # å¯¦ç¾PRDåŠŸèƒ½æ¸¬è©¦é‚è¼¯
        return results
    
    def _run_prd_performance_tests(self, prd_test_cases: List[PRDTestCase]) -> Dict[str, PRDTestResult]:
        """åŸ·è¡ŒPRDæ€§èƒ½æ¸¬è©¦"""
        print("âš¡ åŸ·è¡ŒPRDæ€§èƒ½æ¸¬è©¦...")
        results = {}
        # å¯¦ç¾PRDæ€§èƒ½æ¸¬è©¦é‚è¼¯
        return results
    
    def _run_prd_user_experience_tests(self, prd_test_cases: List[PRDTestCase]) -> Dict[str, PRDTestResult]:
        """åŸ·è¡ŒPRDç”¨æˆ¶é«”é©—æ¸¬è©¦"""
        print("ğŸ‘¥ åŸ·è¡ŒPRDç”¨æˆ¶é«”é©—æ¸¬è©¦...")
        results = {}
        # å¯¦ç¾PRDç”¨æˆ¶é«”é©—æ¸¬è©¦é‚è¼¯
        return results
    
    def _run_prd_permission_tests(self, prd_test_cases: List[PRDTestCase]) -> Dict[str, PRDTestResult]:
        """åŸ·è¡ŒPRDæ¬Šé™æ¸¬è©¦"""
        print("ğŸ” åŸ·è¡ŒPRDæ¬Šé™æ¸¬è©¦...")
        results = {}
        # å¯¦ç¾PRDæ¬Šé™æ¸¬è©¦é‚è¼¯
        return results
```

---

## ğŸ“Š result.md æ›´æ–°åˆ†é¡èˆ‡æ¨™æº–

### 3.1 result.md æ›´æ–°åˆ†é¡æ¨™æº–
```python
# result.md æ›´æ–°åˆ†é¡
RESULT_MD_UPDATE_CATEGORIES = {
    "test_summary_update": {
        "name": "æ¸¬è©¦æ‘˜è¦æ›´æ–°",
        "description": "æ›´æ–°result.mdä¸­çš„æ¸¬è©¦åŸ·è¡Œæ‘˜è¦è¡¨æ ¼",
        "priority": "high",
        "update_frequency": "every_test_run"
    },
    "detailed_results_update": {
        "name": "è©³ç´°çµæœæ›´æ–°", 
        "description": "æ›´æ–°result.mdä¸­çš„è©³ç´°æ¸¬è©¦çµæœ",
        "priority": "high",
        "update_frequency": "every_test_run"
    },
    "prd_verification_update": {
        "name": "PRDé©—è­‰ç‹€æ…‹æ›´æ–°",
        "description": "æ›´æ–°result.mdä¸­çš„PRDéœ€æ±‚é©—è­‰ç‹€æ…‹",
        "priority": "high", 
        "update_frequency": "every_test_run"
    },
    "findings_update": {
        "name": "ç™¼ç¾å»ºè­°æ›´æ–°",
        "description": "æ›´æ–°result.mdä¸­çš„æ¸¬è©¦ç™¼ç¾èˆ‡å»ºè­°",
        "priority": "medium",
        "update_frequency": "every_test_run"
    },
    "progress_tracking_update": {
        "name": "é€²åº¦è¿½è¹¤æ›´æ–°",
        "description": "æ›´æ–°result.mdä¸­çš„æ¸¬è©¦é€²åº¦è¿½è¹¤",
        "priority": "medium",
        "update_frequency": "every_test_run"
    },
    "history_update": {
        "name": "æ›´æ–°æ­·å²è¿½åŠ ",
        "description": "åœ¨result.mdä¸­è¿½åŠ æ–°çš„æ›´æ–°æ­·å²è¨˜éŒ„",
        "priority": "low",
        "update_frequency": "every_test_run"
    }
}
```

### 3.2 result.md æ›´æ–°è³ªé‡æ¨™æº–
```python
# result.md æ›´æ–°è³ªé‡æ¨™æº–
RESULT_MD_UPDATE_QUALITY_STANDARDS = {
    "excellent": {
        "update_completeness": ">= 95%",
        "update_accuracy": ">= 98%",
        "update_timeliness": "real_time",
        "status": "result.md æ›´æ–°å„ªç§€"
    },
    "good": {
        "update_completeness": ">= 85%",
        "update_accuracy": ">= 90%", 
        "update_timeliness": "within_1_hour",
        "status": "result.md æ›´æ–°è‰¯å¥½"
    },
    "acceptable": {
        "update_completeness": ">= 70%",
        "update_accuracy": ">= 80%", 
        "update_timeliness": "within_24_hours",
        "status": "result.md æ›´æ–°å¯æ¥å—"
    },
    "needs_improvement": {
        "update_completeness": "< 70%",
        "update_accuracy": "< 80%", 
        "update_timeliness": "delayed",
        "status": "result.md æ›´æ–°éœ€è¦æ”¹é€²"
    }
}
```

---

## ğŸ”„ result.md æŒçºŒæ›´æ–°ç›£æ§

### 4.1 result.md è‡ªå‹•æ›´æ–°è§¸ç™¼å™¨
```python
# utils/result_md_auto_updater.py
class ResultMdAutoUpdater:
    """result.md è‡ªå‹•æ›´æ–°è§¸ç™¼å™¨"""
    
    def __init__(self):
        self.result_updater = AIResultMdUpdater()
        self.change_monitor = ResultMdChangeMonitor()
    
    def check_and_update_result_md(self):
        """æª¢æŸ¥ä¸¦æ›´æ–°result.md"""
        if self.change_monitor.detect_test_changes():
            print("ğŸ”„ æª¢æ¸¬åˆ°æ¸¬è©¦è®Šæ›´ï¼Œæ›´æ–° result.md...")
            self.result_updater.update_result_md_with_prd_tests()
        else:
            print("âœ… ç„¡æ¸¬è©¦è®Šæ›´ï¼Œè·³é result.md æ›´æ–°")
    
    def schedule_periodic_result_md_updates(self, interval_hours: int = 24):
        """å®‰æ’å®šæœŸresult.mdæ›´æ–°"""
        print(f"â° å®‰æ’æ¯ {interval_hours} å°æ™‚æ›´æ–°ä¸€æ¬¡ result.md")
        # å¯¦ç¾å®šæœŸresult.mdæ›´æ–°é‚è¼¯
```

### 4.2 result.md è®Šæ›´ç›£æ§å™¨
```python
# utils/result_md_change_monitor.py
class ResultMdChangeMonitor:
    """result.md è®Šæ›´ç›£æ§å™¨"""
    
    def __init__(self):
        self.last_check = datetime.now()
        self.test_change_detected = False
    
    def detect_test_changes(self) -> bool:
        """æª¢æ¸¬æ¸¬è©¦æ˜¯å¦æœ‰è®Šæ›´"""
        # å¯¦ç¾æ¸¬è©¦è®Šæ›´æª¢æ¸¬é‚è¼¯
        return self.test_change_detected
    
    def monitor_test_file_changes(self, test_file_paths: List[str]):
        """ç›£æ§æ¸¬è©¦æ–‡ä»¶è®Šæ›´"""
        for test_file_path in test_file_paths:
            if self._has_test_file_changed(test_file_path):
                self.test_change_detected = True
                break
    
    def _has_test_file_changed(self, test_file_path: str) -> bool:
        """æª¢æŸ¥æ¸¬è©¦æ–‡ä»¶æ˜¯å¦è®Šæ›´"""
        # å¯¦ç¾æ¸¬è©¦æ–‡ä»¶è®Šæ›´æª¢æ¸¬é‚è¼¯
        return False
```

---

## ğŸ“ result.md æ›´æ–°ä½¿ç”¨æŒ‡å—

### 5.1 å¿«é€Ÿé–‹å§‹
```bash
# 1. åŸ·è¡ŒPRDæ¸¬è©¦ä¸¦æ›´æ–° result.md
python -m utils.ai_result_md_updater

# 2. æŸ¥çœ‹æ›´æ–°å¾Œçš„ result.md
cat memory_bank/result.md

# 3. æª¢æŸ¥ result.md æ›´æ–°ç‹€æ…‹
python -m utils.result_md_status_checker
```

### 5.2 result.md æ›´æ–°é…ç½®
```python
# config/result_md_update_config.py
RESULT_MD_UPDATE_CONFIG = {
    "prd_file": "memory_bank/prd.md",
    "result_file": "memory_bank/result.md",
    "update_strategy": "overwrite_update",
    "backup_strategy": "version_control",
    "update_completeness_threshold": 85,
    "update_accuracy_threshold": 90,
    "update_timeliness_threshold": "within_1_hour"
}
```

### 5.3 result.md æ›´æ–°é©—æ”¶æ¨™æº–
- **æ›´æ–°å®Œæ•´æ€§**: result.md æ‰€æœ‰ç« ç¯€éƒ½å¾—åˆ°æ›´æ–°
- **æ›´æ–°æº–ç¢ºæ€§**: æ›´æ–°å…§å®¹æº–ç¢ºåæ˜ æ¸¬è©¦çµæœ
- **æ›´æ–°åŠæ™‚æ€§**: æ¸¬è©¦å®Œæˆå¾Œç«‹å³æ›´æ–° result.md
- **æ›´æ–°ä¸€è‡´æ€§**: æ›´æ–°å…§å®¹èˆ‡æ¸¬è©¦çµæœä¿æŒä¸€è‡´
- **æ›´æ–°å¯è®€æ€§**: æ›´æ–°å¾Œçš„ result.md çµæ§‹æ¸…æ™°æ˜“è®€

---

## ğŸ¯ result.md æ›´æ–°æ ¸å¿ƒåŸå‰‡

### 6.1 result.md è¦†è“‹æ›´æ–°åŸå‰‡
- **è¦†è“‹å„ªå…ˆ**: é‡é»æ˜¯æ›´æ–°ç¾æœ‰çš„ result.md æ–‡ä»¶
- **çµæ§‹ä¿æŒ**: ä¿æŒ result.md çš„ç¾æœ‰çµæ§‹å’Œæ ¼å¼
- **å…§å®¹æ›´æ–°**: æ›´æ–° result.md ä¸­çš„æ¸¬è©¦çµæœå…§å®¹
- **æ­·å²è¿½åŠ **: åœ¨ result.md ä¸­è¿½åŠ æ–°çš„æ›´æ–°æ­·å²

### 6.2 result.md æ›´æ–°è³ªé‡æ¨™æº–
- **å®Œæ•´æ€§**: æ›´æ–°è¦†è“‹ result.md çš„æ‰€æœ‰ç›¸é—œç« ç¯€
- **æº–ç¢ºæ€§**: æ›´æ–°å…§å®¹æº–ç¢ºåæ˜ å¯¦éš›æ¸¬è©¦çµæœ
- **åŠæ™‚æ€§**: æ¸¬è©¦å®Œæˆå¾ŒåŠæ™‚æ›´æ–° result.md
- **ä¸€è‡´æ€§**: æ›´æ–°å…§å®¹èˆ‡æ¸¬è©¦çµæœä¿æŒä¸€è‡´

### 6.3 result.md æ›´æ–°æ”¹é€²æ©Ÿåˆ¶
- **æŒçºŒç›£æ§**: æŒçºŒç›£æ§ result.md æ›´æ–°è³ªé‡
- **å®šæœŸè©•ä¼°**: å®šæœŸè©•ä¼° result.md æ›´æ–°æ•ˆæœ
- **å‹•æ…‹èª¿æ•´**: æ ¹æ“šæ¸¬è©¦è®Šæ›´å‹•æ…‹èª¿æ•´æ›´æ–°ç­–ç•¥
- **åé¥‹å¾ªç’°**: å»ºç«‹ result.md æ›´æ–°åé¥‹æ”¹é€²å¾ªç’°

### 6.4 AI åŸ·è¡ŒæŒ‡å°
```python
# AI åŸ·è¡Œ result.md æ›´æ–°çš„é—œéµæŒ‡å°
AI_RESULT_MD_UPDATE_GUIDANCE = {
    "primary_goal": "æ›´æ–°ç¾æœ‰çš„ result.md æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„æ¸¬è©¦å ±å‘Š",
    "update_strategy": "è¦†è“‹æ›´æ–°ç¾æœ‰å…§å®¹ï¼Œä¿æŒæ–‡æª”çµæ§‹",
    "file_operation": "è®€å– -> è§£æ -> æ›´æ–° -> ä¿å­˜ result.md",
    "content_preservation": "ä¿ç•™ç¾æœ‰çµæ§‹ï¼Œæ›´æ–°æ¸¬è©¦çµæœå…§å®¹",
    "history_management": "è¿½åŠ æ–°çš„æ›´æ–°æ­·å²è¨˜éŒ„",
    "quality_assurance": "ç¢ºä¿æ›´æ–°å…§å®¹æº–ç¢ºã€å®Œæ•´ã€åŠæ™‚"
}
```